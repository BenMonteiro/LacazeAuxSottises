{% extends 'base.html.twig' %}

{% block title %}{{ company.name}}{% endblock %}

{% block body %}
<div class="offset-9 col-4 mt-5 mr-5 text-center ">
    <div class="d-flex justify-content-center ">
        <div class="btn-showView mr-1">
            <a class="badge badge-secondary p-2 "
                href="{{ path('company_index') }}">{{'general.back'|trans({}, 'general')|capitalize}}</a>
        </div>
        <div class="btn-showView ml-1">
            <a class="badge badge-primary p-2"
                href="{{ path('company_edit', {'id': company.id}) }}">{{'general.edit'|trans({}, 'general')|capitalize}}</a>
        </div>
    </div>

    <div class="btn-showView">{{ include('company/_delete_form.html.twig') }}</div>
</div>

<h1 class="text-center text-danger font-weight-bold mt-3">{{ company.name}}</h1>

<div class="col-12 d-flex">
    <aside class="col-2 my-5 border-right border-danger">
        <div>
            <h4>{{ 'company.show.title'|trans({}, 'company')|capitalize }} :</h4>
            <p class="ml-3">{{ company.showTitle }}</p>
        </div>
        <div>
            <h4>{{ 'company.show.theme'|trans({}, 'company')|capitalize }} :</h4>
            <p class="ml-3">{{ company.theme }}</p>
        </div>
        <div>
            <h4>{{'company.show.duration'|trans({}, 'company')|capitalize}} :</h4>
            <p class="ml-3">{{ company.duration }} {{'general.minutes'|trans({}, 'general') }}</p>
        </div>
        <div>
            <h4>{{'company.show.audience'|trans({}, 'company')|capitalize}} :</h4>
            <p class="ml-3">{{ company.audience }}</p>
        </div>
        <div>
            <h4>{{'general.more.infos'|trans({}, 'general')|capitalize}} :</h4>
            <p class="ml-3">{{ company.moreInfos }}</p>
        </div>
        {% if company.isInDiffusion != 0 or company.isInCreation != 0 %}
        <div>
            <h4>{{ 'company.status'|trans({}, 'company')|capitalize}}</h4>

            {% if company.isInDiffusion == 1 and company.isInCreation == 0 %}
            <p class="ml-3"> {{ 'company.isIn.diffusion'|trans({}, 'company')|capitalize }}</p>

            {% elseif  company.isInDiffusion == 0 and company.isInCreation == 1 %}
            <p class="ml-3"> {{ 'company.isIn.creation'|trans({}, 'company')|capitalize }}</p>

            {% elseif  company.isInDiffusion == 1 and company.isInCreation == 1 %}
            <p class="ml-3"> {{ 'company.isIn.creation'|trans({}, 'company')|capitalize }} /
                {{ 'company.isIn.diffusion'|trans({}, 'company')|capitalize }} </p>
            {% endif %}
        </div>
        {% endif %}
        {% if company.website != null %}
        <div>
            <h4>{{'general.website'|trans({}, 'general')|capitalize}} :</h4>
            <a class="ml-3" href="{{ company.website }}">Aller vers le site</a>
        </div>
        {% endif %}

        {% if company.website != null %}
        <div>
            <h4>{{'general.videoLink'|trans({}, 'general')|capitalize}} :</h4>
            <a class="ml-3" href="{{ company.videoLink}}">Aller vers la vid√©o</a>
        </div>
        {% endif %}
    </aside>
    <div class="col-9 flex-column">
        <div class="col-12 mb-5 ">
            <img class="miniImage col-4 mt-5 mx-3 float-left"
                src="{{ asset('images/uploads/company/' ~ company.image.name) }}">
            <div class="col-12 text-justify my-5 pt-5">{{ company.description }}</div>
        </div>

        <div class="row offset-1 col-11 mt-5 pt-5">
            <h2 class=" ml-5 mb-3 font-weight-bold">{{ 'company.performances'|trans({}, 'company')|capitalize}}
            </h2>
            <table class="table table-sm table-striped table-bordered text-center">
                <thead>
                    <tr>
                        <th>{{'perf.show.city'|trans({}, 'perf')|capitalize}}</th>
                        <th>{{'perf.show.place'|trans({}, 'perf')|capitalize}}</th>
                        <th>Date</th>
                        <th>{{'perf.show.event'|trans({}, 'perf')|capitalize}}</th>
                        <th><a
                                href="{{ path('performance_new', {'company_id': company.id}) }}">{{'general.create'|trans({}, 'general')|capitalize}}</a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for performance in company.performances %}
                    <tr>
                        <td>{{ performance.cityShow }}</td>
                        <td>{{ performance.placeShow }}</td>
                        <td>{{ performance.date ? performance.date|date('d-m-Y H:i') : '' }}</td>
                        <td>{{ performance.event}}</td>
                        <td>
                            <a class="badge badge-secondary my-2 p-2"
                                href="{{ path('performance_show', {'id': performance.id}) }}">{{'general.show'|trans({}, 'general')|capitalize}}</a>
                            <a class="badge badge-primary p-2 my-2"
                                href="{{ path('performance_edit', {'id': performance.id}) }}">{{'general.edit'|trans({}, 'general')|capitalize}}</a>
                            {{ include('performance/_delete_form.html.twig') }}
                        </td>

                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="8">{{'general.noRecords'|trans({}, 'general')}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}