{% extends "front_templates/home_template.html.twig" %}

{% block body %}

	<div class="d-flex justify-content-around  flex-wrap">
		{% if homeEvents %}
			{% for event in homeEvents %}
				{% if event.startingDate|date('M') == 'now'|date('M') %}
					<div class="col-md-4 col-sm-6 col-12 text-center my-3">
						<a class="element-link d-flex flex-column justify-content-between" href="{{path('display_event',{'id':event.id})}}">
							<div class="cubic-image-div mb-0">
								<img class="image-frame" src="{{ asset('images/cadre.png') }}" alt="cadre noir entourant l'image">
								<img src="{{asset('images/uploads/eventProgram/' ~ event.programImage.name)}}" class="cubic-image" alt="{{event.imageDescription}}">
							</div>
						</a>
						<h3>{{event.name}}</h3>
						<p class="text-decoration-none text-muted my-1">
							{{event.startingDate|format_date(pattern='EEEE dd')|capitalize}}
							-
							{{event.place}}
						</p>
					</div>
				{% endif %}
			{% endfor %}
		{% endif %}
		{% if homePerfs %}
			{% for perf in homePerfs %}
				{% if perf.date|date('M') == 'now'|date('M') %}
					<div class="col-lg-4 col-md-4 col-sm-6 col-12 text-center my-3">
						<a class="element-link d-flex flex-column justify-content-between" href="{{path('display_company',{'id':perf.company.id})}}">
							<div class="cubic-image-div mb-0">
								<img class="image-frame" src="{{ asset('images/cadre.png') }}" alt="cadre noir entourant l'image">
								<img class="cubic-image" src="{{asset('images/uploads/company/' ~ perf.company.image.name)}}" alt="{{perf.company.imageDescription}}">
							</div>
							<h3>{{perf.company}}</h3>
							<p class="text-decoration-none text-muted text-small text-center my-1">
								{{perf.date|format_date(pattern='EEEE dd')|capitalize}}
								-
								{{perf.cityShow}}
							</p>
							<p>
								<small>{{perf.company.showTitle}}</small>
							</p>
						</a>
					</div>
				{% endif %}
			{% endfor %}
		{% endif %}
		<div class="col-lg-4 col-md-4 col-sm-6 col-12 text-center my-3">
			<a class="element-link element-link d-flex flex-column justify-content-between" href="{{asset('images/uploads/eventProgram/' ~ season.programPDF.name)}}">
				<div class="cubic-image-div mb-0">
					<img class="image-frame" src="{{ asset('images/cadre.png') }}" alt="cadre noir entourant l'image">
					<img class="cubic-image" src="{{asset('images/uploads/eventProgram/' ~ season.programImage.name)}}" alt="{{season.imageDescription}}">
				</div>
			</a>
		</div>
	</div>

	<div class=" container-fluid d-flex my-3">
		<div class="text-center col-12">
			<div>
				<div class="d-flex justify-content-center">
					<h2 class="mt-3 pageTitle px-4">
						{{'general.focusOn'|trans({}, 'general')|capitalize}}
					</h2>
				</div>
				<div>
					<img class="sectionTitleBar" src="{{asset('images/title-bar.jpg')}}" alt="barre grise">
				</div>
			</div>
			{% for section in sections %}

				{% set homeFrame = (section.appearanceOrder is odd) ? ' framedArticle red-dash': 'framedArticle dot' %}

				<div class="{{ homeFrame }} offset-2 col-8 p-2 mb-2">
					<div class="text-center">
						{% if section.image.name and section.image.mimeType != 'application/pdf' %}
							<div class="d-flex">
								<img class=" col-md-4 d-none d-md-block mb-2" src=" {{asset('images/uploads/paragraphImage/' ~ section.image.name)}} " alt=" {{section.imageDescription}} ">
								<div class="col-md-8 text-left mt-2">
									<h2 class=" colored">{{ section.title|lower|capitalize }}</h2>
									<p>{{ section.content|raw }}</p>
								</div>
							</div>
						{% else %}
							<div class="mt-2">
								<h2 class="colored">{{ section.title|lower|capitalize }}</h2>
								<p>{{ section.content|raw }}</p>
								{% if section.image.name and section.image.mimeType == 'application/pdf' %}
									<a class="text-break colored" href="{{ asset('images/uploads/paragraphImage/' ~ section.image.name) }}" download>{{'general.download_form'|trans({}, 'general')|capitalize}}</a>
								{% endif %}
							</div>
						{% endif %}
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
	<img class=" d-md-block d-none homeRedCircle" src="{{asset('images/TRAIT.rouge.jpg')}}" alt="cercle pointillé rouge">
	<img class=" d-md-block d-none pageBorder" src="{{asset('images/demi-carré.jpg')}}" alt="demi-carré rouge">
{% endblock %}
